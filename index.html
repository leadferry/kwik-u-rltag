<!DOCTYPE html>
<html ng-app="urltagApp">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="vendor/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
		<script src="vendor/jquery/dist/jquery.min.js"></script>
		<script src="vendor/bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="vendor/angularjs/angular.min.js"></script>
		<script src="vendor/lz-string/libs/lz-string.min.js"></script>
		<script src="kwik-u-rltag.js"></script>
		<title>Kwik-U-RLTag</title>
		<style type="text/css">.nav-tabs { margin-bottom: 10px; }</style>
	</head>
	<body ng-controller="URLTagCtrl">
		<a href="" id="urlParser" style="display:none;"></a>
		<div class="container-fluid">
			<div class="row">
				<h1>LeadFerry Kwik-U-RLTag
					<span>
						<button class="btn btn-sm" type="reset" ng-click="resetURLs()">Reset URLs</button>
						<button class="btn btn-sm" type="reset" ng-click="resetHashbang()">Reset Tags</button>
					</span>
				</h1>
			</div>
			<form class="form-horizontal">
				<div class="form-group">
					<label class="col-sm-2 control-label">Mode :</label>
					<div class="col-sm-9">
					<label class="radio-inline">
						<input type="radio" name="inputModeOptions" id="inputModeBasic" ng-model="tags.mode" value="basic"> Basic
					</label>
					<label class="radio-inline">
						<input type="radio" name="inputModeOptions" id="inputModeAdvanced" ng-model="tags.mode" value="advanced"> Advanced
					</label>
					</div>
				</div>
				<div class="form-group">
					<label for="inputCampaign" class="col-sm-2 control-label">Campaign :</label>
					<div class="col-sm-9"><input type="text" class="form-control" id="inputCampaign" ng-model="tags.campaign"></div>
				</div>
				<div ng-if="tags.mode=='basic'" class="form-group">
					<label for="inputMedium" class="col-sm-2 control-label">Medium :</label>
					<div class="col-sm-9"><input type="text" class="form-control" id="inputMedium" ng-model="tags.medium"></div>
				</div>
				<div ng-if="tags.mode=='basic'" class="form-group">
					<label for="inputSource" class="col-sm-2 control-label">Source :</label>
					<div class="col-sm-9"><input type="text" class="form-control" id="inputSource" ng-model="tags.source"></div>
				</div>
				<div ng-if="tags.mode=='advanced'" class="form-group">
					<label class="col-sm-2 control-label">Medium/Source :</label>
					<div class="col-sm-9">
						<div class="panel panel-default"><div class="panel-body">
							<ul class="nav nav-tabs" role="tablist">
								<li role="presentation" ng-repeat="medium in tags.media" ng-class="{'active': $first}"><a ng-href="#{{medium.tag}}" ng-click="$event.preventDefault()" aria-controls="{{medium.tag}}" role="tab" data-toggle="tab">{{medium.medium}}</a></li>
							</ul>
							<div class="tab-content">
								<div role="tabpanel" ng-repeat="medium in tags.media" ng-class="{'active': $first}" class="tab-pane" id="{{medium.tag}}">
									<div class="form-group">
										<div class="col-sm-2 col-sm-offset-1 checkbox"><label><input type="checkbox" ng-model="medium.enabled">Medium :</label></div>
										<div class="col-sm-9"><input type="text" class="form-control" id="inputMedium-{{medium.tag}}" ng-model="medium.tag" ng-readonly="!medium.enabled"></div>
									</div>
									<ul class="nav nav-tabs" role="tablist">
										<li role="presentation" ng-repeat="source in medium.sources" ng-class="{'active': $first}"><a ng-href="#{{medium.tag}}-{{source.tag}}" ng-click="$event.preventDefault()" aria-controls="{{medium.tag}}-{{source.tag}}" role="tab" data-toggle="tab">{{source.source}}</a></li>
									</ul>
									<div class="tab-content">
										<div role="tabpanel" ng-repeat="source in medium.sources" ng-class="{'active': $first}" class="tab-pane" id="{{medium.tag}}-{{source.tag}}">
											<div class="form-group">
												<div class="col-sm-2 col-sm-offset-1 checkbox"><label><input type="checkbox" ng-model="source.enabled" ng-checked="source.enabled && medium.enabled" ng-disabled="!medium.enabled">Source :</label></div>
												<div class="col-sm-9"><input type="text" class="form-control" id="inputSource-{{source.tag}}" ng-model="source.tag" ng-readonly="!source.enabled || !medium.enabled"></div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div></div>
					</div>
					<div class="col-sm-1 btn-toolbar" role="toolbar">
						<div class="btn-group-vertical" role="group">
							<button type="button" class="btn btn-default" aria-label="Select all preset medium/source" ng-click="toggleAllMediumSource(true)">
								<span class="glyphicon glyphicon-check" aria-hidden="true"></span>
							</button>
							<button type="button" class="btn btn-default" aria-label="Deselect all preset medium/source" ng-click="toggleAllMediumSource(false)">
								<span class="glyphicon glyphicon-unchecked" aria-hidden="true"></span>
							</button>
						</div>
					</div>
				</div>
				<div class="form-group">
					<label for="inputContent" class="col-sm-2 control-label">Content :</label>
					<div class="col-sm-9"><input type="text" class="form-control" id="inputContent" ng-model="tags.content"></div>
				</div>
				<div class="form-group">
					<label for="inputTerm" class="col-sm-2 control-label">Term :</label>
					<div class="col-sm-9"><input type="text" class="form-control" id="inputTerm" ng-model="tags.term"></div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">URL(s) :</label>
					<div ng-repeat="url in urls">
						<div ng-class="{'col-sm-offset-2': !$first}" class="col-sm-9">
							<input ng-if="tags.mode=='basic'" type="text" class="form-control" id="inputURL{{$index}}" ng-model="url.url">
							<div ng-if="tags.mode=='advanced'" class="input-group">
								<input type="text" class="form-control" id="inputURL{{$index}}" ng-model="url.url">
								<span class="input-group-btn">
									<button ng-if="!(url.content || url.term)" class="btn btn-default" type="button" ng-click="addContentTerm($index)">
										<span class="glyphicon glyphicon-plus"></span><span class="glyphicon glyphicon-tags" aria-hidden="true"></span>
									</button>
									<button ng-if="url.content || url.term" class="btn btn-default" type="button" ng-click="removeContentTerm($index)">
										<span class="glyphicon glyphicon-minus"></span><span class="glyphicon glyphicon-tags" aria-hidden="true"></span>
									</button>
								</span>
							</div>
						</div>
						<div class="col-sm-1 btn-toolbar" role="toolbar">
							<div class="btn-group-vertical" role="group">
								<button ng-if="$last" type="button" class="btn btn-default" aria-label="Add another URL" ng-click="addURL()">
									<span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
								</button>
								<button ng-if="!$last" type="button" class="btn btn-default" aria-label="Remove this URL" ng-click="removeURL($index)">
									<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>
								</button>
							</div>
						</div>
						<div ng-if="tags.mode=='advanced' && (url.content || url.term)" class="col-sm-offset-2 col-sm-9"><div class="row">
							<label for="inputContent-{{$index}}" class="col-sm-2 control-label">Content :</label>
							<div class="col-sm-4"><input type="text" class="form-control" id="inputContent-{{$index}}" ng-model="url.content"></div>
							<label for="inputTerm-{{$index}}" class="col-sm-2 control-label">Term :</label>
							<div class="col-sm-4"><input type="text" class="form-control" id="inputTerm-{{$index}}" ng-model="url.term"></div>
						</div></div>
					</div>
				</div>
			</form>
			<div class="row"><div class="col-sm-offset-1 col-sm-10 table-responsive">
				<table class="table table-hover">
					<thead>
						<tr>
							<th ng-repeat="header in headers">
								<a ng-click="sortOrder($index)">{{header}}
									<span ng-show="sortBy=='{{header|lowercase}}'" ng-class="{'dropup': !sortDesc, 'dropdown': sortDesc}"><span class="caret"></span></span>
								</a>
							</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="taggedURL in taggedURLs | orderBy:sortBy:sortDesc">
							<td ng-repeat="header in headers">{{taggedURL[(header|lowercase)]}}</td>
						</tr>
					</tbody>
				</table>
			</div></div>
		</div>
	</body>
</html>

